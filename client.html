<!doctype html>
<html>
  <head><meta charset="utf-8"></head>
  <body>
    <script type="text/javascript" src="file:///C:/Projects/docker-guttest/FileSaver.js"></script>
    <script>
      let websock = new WebSocket('ws://localhost:8011');

      websock.binaryType = "blob";

      websock.onopen = function(event) {
        console.log("WebSocket is open now.");
        websock.send("Is there anybody out there?");
        websock.send("dothething");
      };

      websock.onmessage = function(msg) {
        if (msg.data instanceof Blob) {
          console.log("Client Data: Blob incoming...");
          reader = new FileReader();
          reader.onload = () => {
            saveAs(msg.data, "plzwork.zip");
          };
          reader.readAsArrayBuffer(msg.data);
        } else {
          console.log("Client received: ", msg.data);
        }
      };

    </script>
  </body>
</html>
